# 末日黑奴的自我修养

[![版本](https://img.shields.io/badge/版本-1.0.0-blue)](https://github.com/madrays/MoviePilot-Plugins)
[![支持的站点](https://img.shields.io/badge/支持站点-末日-red)](https://github.com/madrays/MoviePilot-Plugins)

## 简介

"末日黑奴的自我修养"是一个专为末日站点设计的保种监控插件，主要用于监控用户的保种情况，帮助Agsv站保种组成员了解自己的保种状态，计算距离退休还有多长时间。

## 功能特点

- **官种监控**: 实时监控末日站点的官种保种数量和体积
- **体积检查**: 检查是否满足Agsv站保种组设定的最低官种体积要求
- **退休计算**: 根据用户设置的开始日期计算距离退休的剩余时间
- **状态通知**: 支持保种状态变化时的消息通知
- **历史记录**: 完整的官种保种状态历史记录和统计
- **进度展示**: 直观的退休进度百分比显示

## 使用前提

1. 已在MoviePilot中添加并配置好AGSVPT站点
2. 站点数据能够正常获取（需要正确的Cookie等配置）
3. 已加入Agsv站保种组（可选，非保种组成员也可使用）

## 安装方法

1. 在MoviePilot插件商店中添加第三方仓库：`https://github.com/madrays/MoviePilot-Plugins`
2. 在第三方插件列表中找到并安装"末日黑奴的自我修养"
3. 进入插件设置页面完成配置

## 配置说明

### 基本设置
- **启用插件**: 开启/关闭插件功能
- **开启通知**: 是否在状态变化时发送通知
- **立即运行一次**: 保存配置后立即执行一次检查

### 站点设置
- **自动识别**: 插件会自动识别AGSVPT站点，无需手动选择
- **开始日期**: 保种开始日期，用于计算退休进度（必填）
- **检查周期**: 使用Cron表达式设置检查频率，默认每6小时检查一次

### 保种要求设置
- **最小保种体积(TB)**: Agsv站保种组要求的最小官种体积，默认5TB
- **退休所需天数**: 达到此天数可申请退休，默认730天(2年)
- **历史保留天数**: 保种历史记录保留时间，默认30天

## 保种组要求

### Agsv站保种组标准要求
- **最小保种体积**: 5TB
- **保种时长**: 满2年 (730天)
- **持续性**: 需要持续保持保种要求

### 退休条件
1. 在站时间达到2年
2. 保种体积满足最低要求
3. 满足以上条件即可申请退休

## 使用说明

### 配置步骤
1. 确保AGSVPT站点已在MoviePilot中正确配置（必须有有效的Cookie）
2. **重要**: 设置保种开始日期，用于计算退休进度
3. 根据保种组要求设置最小官种体积（默认5TB）
4. 设置合适的检查频率（建议6小时）
5. 启用插件并保存

注：插件会自动识别AGSVPT站点，无需手动选择

### 状态说明
- **🎉 可以退休**: 已满足所有退休条件
- **✅ 保种达标**: 保种体积满足要求，但时间未满
- **⚠️ 保种不足**: 保种体积不满足最低要求

### 通知内容
插件会在以下情况发送通知：
- 保种状态发生变化
- 达到退休条件
- 保种体积低于要求

## 数据展示

### 当前状态面板
- 官种体积（TB）
- 官种数量
- 退休进度百分比
- 距离退休剩余天数

### 历史记录
- 检查时间
- 状态变化
- 官种体积变化
- 退休进度变化

## 常见问题

### Q: 插件显示"未找到AGSVPT站点数据"怎么办？
A: 请检查：
- AGSVPT站点是否已在MoviePilot中添加
- 站点配置是否正确（Cookie等）
- 站点数据是否能正常获取
- 确认站点名称为"AGSVPT"

### Q: 保种体积数据不准确怎么办？
A: 可能原因：
- 站点数据更新延迟
- 单位转换问题
- 站点显示格式变化

### Q: 如何修改保种要求？
A: 在插件配置中调整"最小保种体积"和"退休所需天数"参数即可。

### Q: 支持其他站点吗？
A: 目前专门为末日站点设计，理论上支持其他有类似数据结构的站点，但可能需要调整。

## 注意事项

1. **官种监控**: 本插件只监控"官种加成"的保种数据，不是全部保种体积
2. **数据来源**: 插件直接访问站点的mybonus.php页面获取数据，需要有效的Cookie
3. **开始日期**: 必须正确设置保种开始日期，否则无法计算退休进度
4. **检查频率**: 不建议设置过高的检查频率，以免对站点造成压力
5. **保种要求**: 请根据实际的保种组要求调整官种体积设置
6. **退休申请**: 插件只计算是否满足退休条件，实际退休仍需手动申请

## 技术特性

- 直接访问站点mybonus.php页面获取实时数据
- 智能解析HTML表格提取官种保种信息
- 支持多种体积单位自动转换（KB/MB/GB/TB）
- 完善的错误处理和日志记录
- 响应式的历史记录展示
- 自动数据清理和存储优化
- 基于用户设置的开始日期精确计算退休进度

## 版本历史

### v1.0.0
- 首次发布
- 支持直接访问站点mybonus.php页面获取官种数据
- 支持官种体积检查和数量统计
- 支持基于用户设置日期的退休进度计算
- 支持历史记录和状态通知
- 专门针对Agsv站保种组需求设计

## 支持

如有问题或建议，请：
- 提交GitHub Issues
- 联系插件作者
- 在相关社区反馈

## 致谢

感谢Agsv站保种组的辛勤付出，让PT世界更加美好！

---

**免责声明**: 本插件仅用于个人保种状态监控，不代表任何官方立场。实际保种组要求请以官方通知为准。 